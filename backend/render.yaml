# render.yaml
# Render Infrastructure-as-Code (IaC) configuration for Django (SQLite)

services:
  - type: web
    name: ecommerce-product-api
    env: python
    plan: free                      # You can upgrade to 'starter' or 'standard' later
    region: oregon                  # Or choose 'frankfurt', 'singapore', etc.
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
    startCommand: |
      python manage.py migrate && \
      python manage.py collectstatic --noinput && \
      gunicorn E-commerce-Product-API.wsgi:application
    envVars:
      - key: SECRET_KEY
        value: "django-insecure-change-this-secret-key"
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: "ecommerce-product-api.onrender.com"
      - key: DJANGO_SETTINGS_MODULE
        value: "E-commerce-Product-API.settings"
      - key: PYTHON_VERSION
        value: "3.12.6"
      - key: DATABASE_URL
        value: "sqlite:///db.sqlite3"
      - key: RENDER
        value: "True"

    autoDeploy: true
    buildFilter:
      paths:
        - requirements.txt
        - manage.py
        - E-commerce-Product-API/**
        - api/**
        - render.yaml
   startCommand: |
  python manage.py migrate && \
  python manage.py collectstatic --noinput && \
  gunicorn E-commerce-Product-API.wsgi:application

