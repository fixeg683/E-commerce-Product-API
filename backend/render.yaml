# backend/render.yaml
# Render configuration for deploying Django (SQLite, no Docker)

services:
  - type: web
    name: ecommerce-product-api
    env: python
    plan: free
    rootDir: backend            # ðŸ‘ˆ tells Render to use /backend as the working directory
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
    startCommand: |
      python manage.py migrate && \
      python manage.py collectstatic --noinput && \
      gunicorn E-commerce-Product-API.wsgi:application
    envVars:
      - key: SECRET_KEY
        value: "django-insecure-change-this-secret-key"
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: "ecommerce-product-api.onrender.com"
      - key: DJANGO_SETTINGS_MODULE
        value: "E-commerce-Product-API.settings"
      - key: PYTHON_VERSION
        value: "3.12.6"
      - key: DATABASE_URL
        value: "sqlite:///db.sqlite3"
      - key: RENDER
        value: "True"
      - key: STATIC_ROOT
        value: "/opt/render/project/src/backend/staticfiles"
      - key: MEDIA_ROOT
        value: "/opt/render/project/src/backend/media"
